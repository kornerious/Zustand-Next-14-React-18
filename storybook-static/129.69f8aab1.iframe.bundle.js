"use strict";(self.webpackChunknext_zustand_ts=self.webpackChunknext_zustand_ts||[]).push([[129,510],{"./components/ProductGrid/ProductGrid.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ProductGrid_ProductGrid});var _object_spread=__webpack_require__("./node_modules/@swc/helpers/esm/_object_spread.js"),_object_spread_props=__webpack_require__("./node_modules/@swc/helpers/esm/_object_spread_props.js"),jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),CircularProgress=__webpack_require__("./node_modules/@mui/material/CircularProgress/CircularProgress.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),Grid=__webpack_require__("./node_modules/@mui/material/Grid/Grid.js"),dynamic=__webpack_require__("./node_modules/next/dynamic.js"),dynamic_default=__webpack_require__.n(dynamic),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js");(0,styled.Ay)(Grid.Ay)((({theme})=>({margin:0,width:"100%"})));const ErrorContainer=(0,styled.Ay)(Box.A)((({theme})=>({textAlign:"center",padding:theme.spacing(4),width:"100%"}))),LoadingContainer=(0,styled.Ay)(Box.A)((({theme})=>({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:theme.spacing(4)}))),ProductCard=dynamic_default()((()=>Promise.all([__webpack_require__.e(147),__webpack_require__.e(645),__webpack_require__.e(794),__webpack_require__.e(832),__webpack_require__.e(929),__webpack_require__.e(491),__webpack_require__.e(684),__webpack_require__.e(475),__webpack_require__.e(110)]).then(__webpack_require__.bind(__webpack_require__,"./components/ProductCard/index.ts"))),{loadableGenerated:{webpack:()=>["./components/ProductCard/index.ts"]},ssr:!1,loading:()=>(0,jsx_runtime.jsx)(Box.A,{sx:{height:"320px",bgcolor:"rgba(0,0,0,0.04)",borderRadius:2,p:2,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,jsx_runtime.jsx)(CircularProgress.A,{size:30})})}),ProductModal=dynamic_default()((()=>Promise.all([__webpack_require__.e(147),__webpack_require__.e(645),__webpack_require__.e(794),__webpack_require__.e(832),__webpack_require__.e(436),__webpack_require__.e(929),__webpack_require__.e(491),__webpack_require__.e(995),__webpack_require__.e(53)]).then(__webpack_require__.bind(__webpack_require__,"./components/ProductModal/index.ts"))),{loadableGenerated:{webpack:()=>["./components/ProductModal/index.ts"]},ssr:!1}),ProductGrid=(0,react.memo)((({products,loading,error,onAddToCart,emptyMessage="No products found.",columns,fullWidth=!1,spacing=4,categoryKey})=>{const[selectedProduct,setSelectedProduct]=(0,react.useState)(null),[modalOpen,setModalOpen]=(0,react.useState)(!1),prevOpenState=(0,react.useRef)(!1),gridRef=(0,react.useRef)(null),[visibleRange,setVisibleRange]=(0,react.useState)({start:0,end:12});(0,react.useEffect)((()=>{const initialCount=products.length>24?12:products.length;if(setVisibleRange({start:0,end:initialCount}),!gridRef.current||products.length<=initialCount)return;const observer=new IntersectionObserver((entries=>{entries[0].isIntersecting&&visibleRange.end<products.length&&setVisibleRange((prev=>({start:prev.start,end:Math.min(prev.end+(products.length>50?8:12),products.length)})))}),{threshold:.1,rootMargin:"200px"}),sentinel=document.createElement("div");return sentinel.style.height="10px",gridRef.current.appendChild(sentinel),observer.observe(sentinel),()=>{sentinel.parentNode&&sentinel.parentNode.removeChild(sentinel),observer.disconnect()}}),[products.length]),(0,react.useEffect)((()=>{if(modalOpen&&selectedProduct){products.some((p=>p.id===selectedProduct.id))||handleCloseModal()}}),[products]);const handleOpenModal=(0,react.useCallback)((product=>{setSelectedProduct(product),prevOpenState.current=!0,setModalOpen(!0)}),[]),handleCloseModal=(0,react.useCallback)((()=>{modalOpen&&(setModalOpen(!1),setTimeout((()=>{prevOpenState.current=!1}),300))}),[modalOpen]),handleAddToCart=(0,react.useCallback)((product=>{onAddToCart(product)}),[onAddToCart]),visibleProducts=(0,react.useMemo)((()=>products.slice(0,visibleRange.end)),[products,visibleRange.end]);return loading?(0,jsx_runtime.jsxs)(LoadingContainer,{"data-testid":"product-grid-loading",children:[(0,jsx_runtime.jsx)(CircularProgress.A,{size:60,thickness:4}),(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",sx:{mt:2},children:"Loading products..."})]}):error?(0,jsx_runtime.jsx)(ErrorContainer,{"data-testid":"product-grid-error",children:(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",color:"error",children:error})}):products.length?(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsxs)(Box.A,{ref:gridRef,sx:(0,_object_spread_props._)((0,_object_spread._)({width:"100%"},fullWidth?{maxWidth:"100%"}:{}),{transition:"opacity 0.3s ease-in-out"}),"data-testid":"product-grid",children:[(0,jsx_runtime.jsx)(Grid.Ay,{container:!0,spacing,children:visibleProducts.map(((product,index)=>index>visibleRange.end+8?null:(0,jsx_runtime.jsx)(Grid.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,xl:3,children:(0,jsx_runtime.jsx)(ProductCard,{product,onAddToCart:handleAddToCart,onViewDetails:handleOpenModal,priority:index<4,redirectToCart:!1})},`${product.id}-${categoryKey||"all"}`)))}),products.length>visibleRange.end&&(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex",justifyContent:"center",mt:4,mb:2},children:(0,jsx_runtime.jsx)(CircularProgress.A,{size:40})})]}),selectedProduct&&(0,jsx_runtime.jsx)(ProductModal,{open:modalOpen,product:selectedProduct,onClose:handleCloseModal,onAddToCart:handleAddToCart,redirectToCart:!0})]}):(0,jsx_runtime.jsx)(ErrorContainer,{"data-testid":"product-grid-empty",children:(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",children:emptyMessage})})}));ProductGrid.displayName="ProductGrid";const ProductGrid_ProductGrid=ProductGrid;ProductGrid.__docgenInfo={description:"ProductGrid component displays a grid of products with loading, error states and modal interaction.\n\nOptimized with:\n- Memoization to prevent unnecessary re-renders\n- Smart loading strategy for prioritizing visible products\n- Efficient modal handling to prevent flickering\n- Performance optimizations for large product lists",methods:[],displayName:"ProductGrid",props:{products:{required:!0,tsType:{name:"Array",elements:[{name:"Product"}],raw:"Product[]"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},error:{required:!1,tsType:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}]},description:""},onAddToCart:{required:!0,tsType:{name:"signature",type:"function",raw:"(product: Product) => void",signature:{arguments:[{type:{name:"Product"},name:"product"}],return:{name:"void"}}},description:""},columns:{required:!1,tsType:{name:"GridProps['columns']",raw:"GridProps['columns']"},description:""},fullWidth:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},emptyMessage:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'No products found.'",computed:!1}},spacing:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"4",computed:!1}},categoryKey:{required:!1,tsType:{name:"string"},description:""}}}}}]);