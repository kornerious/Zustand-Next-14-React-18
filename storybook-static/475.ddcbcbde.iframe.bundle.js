"use strict";(self.webpackChunknext_zustand_ts=self.webpackChunknext_zustand_ts||[]).push([[475],{"./components/ProductCard/ProductCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>ProductCard_ProductCard});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),Paper=__webpack_require__("./node_modules/@mui/material/Paper/Paper.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),Skeleton=__webpack_require__("./node_modules/@mui/material/Skeleton/Skeleton.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),CardContent=__webpack_require__("./node_modules/@mui/material/CardContent/CardContent.js"),Rating=__webpack_require__("./node_modules/@mui/material/Rating/Rating.js"),Stack=__webpack_require__("./node_modules/@mui/material/Stack/Stack.js"),Snackbar=__webpack_require__("./node_modules/@mui/material/Snackbar/Snackbar.js"),Fade=__webpack_require__("./node_modules/@mui/material/Fade/Fade.js"),Alert=__webpack_require__("./node_modules/@mui/material/Alert/Alert.js"),_object_spread=__webpack_require__("./node_modules/@swc/helpers/esm/_object_spread.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js");const ProductActionButton=({label,onClick,color="primary",disabled=!1,fullWidth=!0,sx={}})=>(0,jsx_runtime.jsx)(Button.A,{variant:"contained",color:"light"===color?"primary":color,fullWidth,disabled,onClick,sx:theme=>(0,_object_spread._)({borderRadius:2,fontWeight:500,py:.7,px:2,minHeight:36,textTransform:"none",color:"white",boxShadow:"0 2px 8px rgba(25, 118, 210, 0.10)",border:"none",backgroundColor:"light"===color?theme.palette.primary.light:theme.palette[color||"primary"].main,zIndex:2,letterSpacing:.2,fontSize:{xs:"0.95rem",md:"1rem"},lineHeight:1.1,"&:hover":{backgroundColor:"light"===color?theme.palette.primary.main:theme.palette[color||"primary"].dark,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.12)",transform:"translateY(-1px)"},transition:"all 0.18s cubic-bezier(.4,0,.2,1)",mb:2},sx),children:label}),ProductCard_ProductActionButton=ProductActionButton;ProductActionButton.__docgenInfo={description:"",methods:[],displayName:"ProductActionButton",props:{label:{required:!0,tsType:{name:"string"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLButtonElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLButtonElement>",elements:[{name:"HTMLButtonElement"}]},name:"e"}],return:{name:"void"}}},description:""},color:{required:!1,tsType:{name:"union",raw:'"primary" | "secondary" | "light"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"light"'}]},description:"",defaultValue:{value:'"primary"',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},fullWidth:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},sx:{required:!1,tsType:{name:"object"},description:"",defaultValue:{value:"{}",computed:!1}}}};var next_image=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.mjs"),cartStore=__webpack_require__("./store/cartStore.ts"),utils=__webpack_require__("./src/utils.ts");const ProductCard=(0,react.memo)((({product,onAddToCart,onViewDetails,priority=!1,redirectToCart=!0})=>{var _product_rating,_product_rating1;const[snackbarOpen,setSnackbarOpen]=(0,react.useState)(!1),[imageLoading,setImageLoading]=(0,react.useState)(!0),[imageError,setImageError]=(0,react.useState)(!1),productIdRef=(0,react.useRef)(null),isMounted=(0,react.useRef)(!0),router=(0,navigation.useRouter)(),isInCart=(0,cartStore.x)((state=>state.isItemInCart(product.id)));(0,react.useEffect)((()=>(isMounted.current=!0,productIdRef.current!==product.id&&(productIdRef.current=product.id,setImageLoading(!0),setImageError(!1),product.image||(setImageLoading(!1),setImageError(!0))),()=>{isMounted.current=!1})),[product.id,product.image]);const handleAddToCart=(0,react.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),onAddToCart(product),setSnackbarOpen(!0),redirectToCart&&setTimeout((()=>{isMounted.current&&router.push("/cart")}),800)}),[product,onAddToCart,router,redirectToCart]),handleSnackbarClose=(0,react.useCallback)((()=>{setSnackbarOpen(!1)}),[]),handleProductClick=(0,react.useCallback)((e=>{e&&(e.preventDefault(),e.stopPropagation()),onViewDetails(product)}),[product,onViewDetails]),handleImageLoad=(0,react.useCallback)((()=>{isMounted.current&&productIdRef.current===product.id&&(setImageLoading(!1),setImageError(!1))}),[product.id]),handleImageError=(0,react.useCallback)((()=>{isMounted.current&&productIdRef.current===product.id&&(setImageLoading(!1),setImageError(!0))}),[product.id]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Paper.A,{elevation:0,component:"article",sx:{height:"100%",display:"flex",flexDirection:"column",bgcolor:"background.paper",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 30px rgba(0,0,0,0.1)",transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 40px rgba(0,0,0,0.15)"},position:"relative",zIndex:1},onClick:handleProductClick,children:[(0,jsx_runtime.jsxs)(Box.A,{sx:{position:"relative",width:"100%",height:300,overflow:"hidden",borderTopLeftRadius:8,borderTopRightRadius:8,backgroundColor:"background.paper",display:"flex",alignItems:"center",justifyContent:"center"},className:"product-image-container",children:[imageLoading&&(0,jsx_runtime.jsx)(Skeleton.A,{variant:"rectangular",width:"100%",height:"100%",animation:"wave",sx:{position:"absolute",top:0,left:0}}),(0,jsx_runtime.jsx)(Box.A,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:imageLoading?0:1,transition:"opacity 0.3s ease"},children:!imageError&&product.image?(0,jsx_runtime.jsx)(next_image.A,{src:product.image,alt:product.title,fill:!0,style:{objectFit:"cover"},priority,sizes:"(max-width: 600px) 100vw, (max-width: 900px) 50vw, (max-width: 1200px) 33vw, 25vw",quality:85,onLoad:handleImageLoad,onError:handleImageError}):(0,jsx_runtime.jsx)(Box.A,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.paper"},children:(0,jsx_runtime.jsx)(Typography.A,{variant:"body2",color:"text.secondary",sx:{textAlign:"center"},children:product.image?"Image not available":"No image provided"})})})]}),(0,jsx_runtime.jsxs)(CardContent.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",gap:2,p:3},children:[(0,jsx_runtime.jsx)(Typography.A,{gutterBottom:!0,variant:"h6",component:"div",sx:{fontWeight:600,minHeight:"3em",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:product.title}),(0,jsx_runtime.jsxs)(Box.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,jsx_runtime.jsx)(Rating.A,{value:(null===(_product_rating=product.rating)||void 0===_product_rating?void 0:_product_rating.rate)||0,precision:.5,readOnly:!0,sx:{"& .MuiRating-iconFilled":{color:"primary.main"},"& .MuiRating-iconEmpty":{color:"rgba(255, 255, 255, 0.2)"}}}),(0,jsx_runtime.jsxs)(Typography.A,{variant:"body2",sx:{ml:1,color:"text.secondary"},children:["(",(null===(_product_rating1=product.rating)||void 0===_product_rating1?void 0:_product_rating1.count)||0,")"]})]}),(0,jsx_runtime.jsx)(Typography.A,{variant:"body1",sx:{mb:2,color:"text.secondary",flexGrow:1},children:(0,utils.$g)(product.price)}),(0,jsx_runtime.jsxs)(Stack.A,{direction:"row",spacing:1,sx:{mt:2},children:[(0,jsx_runtime.jsx)(ProductCard_ProductActionButton,{label:"View Details",onClick:handleProductClick,color:"light"}),(0,jsx_runtime.jsx)(ProductCard_ProductActionButton,{label:isInCart?"Add Again":"Add to Cart",onClick:handleAddToCart,color:"secondary"})]})]})]}),(0,jsx_runtime.jsx)(Snackbar.A,{open:snackbarOpen,autoHideDuration:1500,onClose:handleSnackbarClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},TransitionComponent:Fade.A,children:(0,jsx_runtime.jsxs)(Alert.A,{severity:"success",variant:"filled",sx:{width:"100%"},onClose:handleSnackbarClose,children:['Added "',product.title,'" to cart!']})})]})}));ProductCard.displayName="ProductCard";const ProductCard_ProductCard=ProductCard;ProductCard.__docgenInfo={description:"ProductCard component displays product information and allows adding to cart\nand viewing product details.\n\nOptimized with:\n- Memoization to prevent unnecessary re-renders\n- UseCallback for event handlers\n- Clean state management with refs for tracking\n- Proper cleanup to prevent memory leaks",methods:[],displayName:"ProductCard",props:{product:{required:!0,tsType:{name:"Product"},description:""},onAddToCart:{required:!0,tsType:{name:"signature",type:"function",raw:"(product: Product) => void",signature:{arguments:[{type:{name:"Product"},name:"product"}],return:{name:"void"}}},description:""},onViewDetails:{required:!0,tsType:{name:"signature",type:"function",raw:"(product: Product) => void",signature:{arguments:[{type:{name:"Product"},name:"product"}],return:{name:"void"}}},description:""},priority:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},redirectToCart:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}}},"./src/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function memoize(func){const cache=new Map,memoized=function(...args){const key=JSON.stringify(args);if(cache.has(key))return cache.get(key);const result=func(...args);return cache.set(key,result),result};return memoized.clear=()=>{cache.clear()},memoized}function formatPrice(price,currency="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(price)}__webpack_require__.d(__webpack_exports__,{$g:()=>formatPrice,Bj:()=>memoize})},"./store/cartStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>useCartStore});var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@swc/helpers/esm/_object_spread.js"),_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@swc/helpers/esm/_object_spread_props.js"),zustand__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zustand/esm/index.mjs"),zustand_middleware__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/zustand/esm/middleware.mjs"),_src_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils.ts");const calculateCart=(0,_src_utils__WEBPACK_IMPORTED_MODULE_0__.Bj)((items=>items.reduce(((result,item)=>{const quantity=item.quantity||1;return{itemCount:result.itemCount+quantity,total:result.total+item.price*quantity}}),{itemCount:0,total:0}))),calculateItemCount=(0,_src_utils__WEBPACK_IMPORTED_MODULE_0__.Bj)((items=>calculateCart(items).itemCount)),calculateTotal=(0,_src_utils__WEBPACK_IMPORTED_MODULE_0__.Bj)((items=>calculateCart(items).total)),useCartStore=(0,zustand__WEBPACK_IMPORTED_MODULE_1__.vt)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_2__.Zr)(((set,get)=>({items:[],addToCart:product=>{const{items}=get();let newItems;newItems=items.find((item=>item.id===product.id))?items.map((item=>item.id===product.id?(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__._)({},item),{quantity:(item.quantity||1)+1}):item)):[...items,(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__._)({},product),{quantity:1})];const{itemCount,total}=calculateCart(newItems);set({items:newItems,itemCount,total})},removeFromCart:productId=>{const{items}=get(),newItems=items.filter((item=>item.id!==productId)),{itemCount,total}=calculateCart(newItems);set({items:newItems,itemCount,total})},updateQuantity:(productId,quantity)=>{const{items}=get(),validQuantity=Math.max(1,quantity),newItems=items.map((item=>item.id===productId?(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__._)({},item),{quantity:validQuantity}):item)),{itemCount,total}=calculateCart(newItems);set({items:newItems,itemCount,total})},clearCart:()=>{set({items:[],itemCount:0,total:0})},getItem:productId=>new Map(get().items.map((item=>[item.id,item]))).get(productId),getItemQuantity:productId=>{var _get_getItem;return(null===(_get_getItem=get().getItem(productId))||void 0===_get_getItem?void 0:_get_getItem.quantity)||0},isItemInCart:productId=>!!get().getItem(productId),itemCount:0,total:0})),{name:"cart-storage",version:1,partialize:state=>({items:state.items}),storage:(0,zustand_middleware__WEBPACK_IMPORTED_MODULE_2__.KU)((()=>localStorage)),onRehydrateStorage:()=>state=>{if(state){const items=state.items||[];state.itemCount=calculateItemCount(items),state.total=calculateTotal(items)}}}))}}]);