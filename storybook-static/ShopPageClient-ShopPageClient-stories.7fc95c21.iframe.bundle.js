"use strict";(self.webpackChunknext_zustand_ts=self.webpackChunknext_zustand_ts||[]).push([[412],{"./components/ShopPageClient/ShopPageClient.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ShopPageClient_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),CircularProgress=__webpack_require__("./node_modules/@mui/material/CircularProgress/CircularProgress.js"),Container=__webpack_require__("./node_modules/@mui/material/Container/Container.js"),Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js"),Grid=__webpack_require__("./node_modules/@mui/material/Grid/Grid.js"),TextField=__webpack_require__("./node_modules/@mui/material/TextField/TextField.js"),FormControl=__webpack_require__("./node_modules/@mui/material/FormControl/FormControl.js"),InputLabel=__webpack_require__("./node_modules/@mui/material/InputLabel/InputLabel.js"),Select=__webpack_require__("./node_modules/@mui/material/Select/Select.js"),MenuItem=__webpack_require__("./node_modules/@mui/material/MenuItem/MenuItem.js"),cartStore=__webpack_require__("./store/cartStore.ts"),dynamic=__webpack_require__("./node_modules/next/dynamic.js");const ProductGrid=__webpack_require__.n(dynamic)()((()=>__webpack_require__.e(510).then(__webpack_require__.bind(__webpack_require__,"./components/ProductGrid/ProductGrid.tsx"))),{loadableGenerated:{webpack:()=>["./components/ProductGrid/ProductGrid.tsx"]},loading:()=>(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,jsx_runtime.jsx)(CircularProgress.A,{})}),ssr:!1});function ShopPageClient({initialProducts,categories}){const[products,setProducts]=(0,react.useState)(initialProducts),[searchTerm,setSearchTerm]=(0,react.useState)(""),[selectedCategory,setSelectedCategory]=(0,react.useState)("all"),addToCart=(0,cartStore.x)((state=>state.addToCart)),filteredProducts=(0,react.useMemo)((()=>products.filter((product=>{var _product_description;return product.title.toLowerCase().includes(searchTerm.toLowerCase())||(null!==(_product_description=product.description)&&void 0!==_product_description?_product_description:"").toLowerCase().includes(searchTerm.toLowerCase())})).filter((product=>"all"===selectedCategory||product.category.toLowerCase()===selectedCategory.toLowerCase()))),[products,searchTerm,selectedCategory]);return(0,jsx_runtime.jsxs)(Container.A,{maxWidth:"xl",sx:{py:4},"data-testid":"shop-page-client",children:[(0,jsx_runtime.jsx)(Typography.A,{variant:"h2",component:"h1",gutterBottom:!0,sx:{fontWeight:600},children:"Shop All Products"}),(0,jsx_runtime.jsxs)(Grid.Ay,{container:!0,spacing:2,sx:{mb:4},children:[(0,jsx_runtime.jsx)(Grid.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,jsx_runtime.jsx)(TextField.A,{fullWidth:!0,label:"Search Products",variant:"outlined",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})}),(0,jsx_runtime.jsx)(Grid.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,jsx_runtime.jsxs)(FormControl.A,{fullWidth:!0,variant:"outlined",children:[(0,jsx_runtime.jsx)(InputLabel.A,{children:"Category"}),(0,jsx_runtime.jsxs)(Select.A,{value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),label:"Category",children:[(0,jsx_runtime.jsx)(MenuItem.A,{value:"all",children:"All Categories"}),categories.map((cat=>(0,jsx_runtime.jsx)(MenuItem.A,{value:cat.toLowerCase(),children:cat},cat)))]})]})})]}),(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(Box.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,jsx_runtime.jsx)(CircularProgress.A,{})}),children:(0,jsx_runtime.jsx)(ProductGrid,{products:filteredProducts,loading:!1,error:null,onAddToCart:addToCart,columns:{xs:12,sm:6,md:4,lg:3},spacing:3,fullWidth:!0})})]})}ShopPageClient.__docgenInfo={description:"",methods:[],displayName:"ShopPageClient",props:{initialProducts:{required:!0,tsType:{name:"Array",elements:[{name:"Product"}],raw:"Product[]"},description:""},categories:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};const ShopPageClient_stories={title:"Pages/ShopPageClient",component:ShopPageClient,parameters:{layout:"fullscreen"}},Default={args:{}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    // Provide any props if needed\n  }\n}",...Default.parameters?.docs?.source}}}},"./src/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function memoize(func){const cache=new Map,memoized=function(...args){const key=JSON.stringify(args);if(cache.has(key))return cache.get(key);const result=func(...args);return cache.set(key,result),result};return memoized.clear=()=>{cache.clear()},memoized}function formatPrice(price,currency="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(price)}__webpack_require__.d(__webpack_exports__,{$g:()=>formatPrice,Bj:()=>memoize})},"./store/cartStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>useCartStore});var _swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@swc/helpers/esm/_object_spread.js"),_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@swc/helpers/esm/_object_spread_props.js"),zustand__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zustand/esm/index.mjs"),zustand_middleware__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/zustand/esm/middleware.mjs"),_src_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils.ts");const calculateCart=(0,_src_utils__WEBPACK_IMPORTED_MODULE_0__.Bj)((items=>items.reduce(((result,item)=>{const quantity=item.quantity||1;return{itemCount:result.itemCount+quantity,total:result.total+item.price*quantity}}),{itemCount:0,total:0}))),calculateItemCount=(0,_src_utils__WEBPACK_IMPORTED_MODULE_0__.Bj)((items=>calculateCart(items).itemCount)),calculateTotal=(0,_src_utils__WEBPACK_IMPORTED_MODULE_0__.Bj)((items=>calculateCart(items).total)),useCartStore=(0,zustand__WEBPACK_IMPORTED_MODULE_1__.vt)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_2__.Zr)(((set,get)=>({items:[],addToCart:product=>{const{items}=get();let newItems;newItems=items.find((item=>item.id===product.id))?items.map((item=>item.id===product.id?(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__._)({},item),{quantity:(item.quantity||1)+1}):item)):[...items,(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__._)({},product),{quantity:1})];const{itemCount,total}=calculateCart(newItems);set({items:newItems,itemCount,total})},removeFromCart:productId=>{const{items}=get(),newItems=items.filter((item=>item.id!==productId)),{itemCount,total}=calculateCart(newItems);set({items:newItems,itemCount,total})},updateQuantity:(productId,quantity)=>{const{items}=get(),validQuantity=Math.max(1,quantity),newItems=items.map((item=>item.id===productId?(0,_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_3__._)((0,_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_4__._)({},item),{quantity:validQuantity}):item)),{itemCount,total}=calculateCart(newItems);set({items:newItems,itemCount,total})},clearCart:()=>{set({items:[],itemCount:0,total:0})},getItem:productId=>new Map(get().items.map((item=>[item.id,item]))).get(productId),getItemQuantity:productId=>{var _get_getItem;return(null===(_get_getItem=get().getItem(productId))||void 0===_get_getItem?void 0:_get_getItem.quantity)||0},isItemInCart:productId=>!!get().getItem(productId),itemCount:0,total:0})),{name:"cart-storage",version:1,partialize:state=>({items:state.items}),storage:(0,zustand_middleware__WEBPACK_IMPORTED_MODULE_2__.KU)((()=>localStorage)),onRehydrateStorage:()=>state=>{if(state){const items=state.items||[];state.itemCount=calculateItemCount(items),state.total=calculateTotal(items)}}}))}}]);